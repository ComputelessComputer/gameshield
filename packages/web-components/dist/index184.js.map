{"version":3,"file":"index184.js","sources":["../../../node_modules/.pnpm/@pixi+utils@7.4.3/node_modules/@pixi/utils/lib/browser/detectVideoAlphaMode.mjs"],"sourcesContent":["import { ALPHA_MODES } from \"@pixi/constants\";\nlet promise;\nasync function detectVideoAlphaMode() {\n  return promise ?? (promise = (async () => {\n    const gl = document.createElement(\"canvas\").getContext(\"webgl\");\n    if (!gl)\n      return ALPHA_MODES.UNPACK;\n    const video = await new Promise((resolve) => {\n      const video2 = document.createElement(\"video\");\n      video2.onloadeddata = () => resolve(video2), video2.onerror = () => resolve(null), video2.autoplay = !1, video2.crossOrigin = \"anonymous\", video2.preload = \"auto\", video2.src = \"data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=\", video2.load();\n    });\n    if (!video)\n      return ALPHA_MODES.UNPACK;\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer), gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      texture,\n      0\n    ), gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, !1), gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE), gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n    const pixel = new Uint8Array(4);\n    return gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel), gl.deleteFramebuffer(framebuffer), gl.deleteTexture(texture), gl.getExtension(\"WEBGL_lose_context\")?.loseContext(), pixel[0] <= pixel[3] ? ALPHA_MODES.PMA : ALPHA_MODES.UNPACK;\n  })()), promise;\n}\nexport {\n  detectVideoAlphaMode\n};\n//# sourceMappingURL=detectVideoAlphaMode.mjs.map\n"],"names":["promise","detectVideoAlphaMode","gl","ALPHA_MODES","video","resolve","video2","texture","framebuffer","pixel","_a"],"mappings":";AACA,IAAIA;AACJ,eAAeC,IAAuB;AACpC,SAAOD,MAAYA,KAAW,YAAY;;AACxC,UAAME,IAAK,SAAS,cAAc,QAAQ,EAAE,WAAW,OAAO;AAC9D,QAAI,CAACA;AACH,aAAOC,EAAY;AACrB,UAAMC,IAAQ,MAAM,IAAI,QAAQ,CAACC,MAAY;AAC3C,YAAMC,IAAS,SAAS,cAAc,OAAO;AAC7C,MAAAA,EAAO,eAAe,MAAMD,EAAQC,CAAM,GAAGA,EAAO,UAAU,MAAMD,EAAQ,IAAI,GAAGC,EAAO,WAAW,IAAIA,EAAO,cAAc,aAAaA,EAAO,UAAU,QAAQA,EAAO,MAAM,2sBAA2sBA,EAAO,KAAI;AAAA,IAC74B,CAAK;AACD,QAAI,CAACF;AACH,aAAOD,EAAY;AACrB,UAAMI,IAAUL,EAAG;AACnB,IAAAA,EAAG,YAAYA,EAAG,YAAYK,CAAO;AACrC,UAAMC,IAAcN,EAAG;AACvB,IAAAA,EAAG,gBAAgBA,EAAG,aAAaM,CAAW,GAAGN,EAAG;AAAA,MAClDA,EAAG;AAAA,MACHA,EAAG;AAAA,MACHA,EAAG;AAAA,MACHK;AAAA,MACA;AAAA,IACD,GAAEL,EAAG,YAAYA,EAAG,gCAAgC,EAAE,GAAGA,EAAG,YAAYA,EAAG,oCAAoCA,EAAG,IAAI,GAAGA,EAAG,WAAWA,EAAG,YAAY,GAAGA,EAAG,MAAMA,EAAG,MAAMA,EAAG,eAAeE,CAAK;AACnM,UAAMK,IAAQ,IAAI,WAAW,CAAC;AAC9B,WAAOP,EAAG,WAAW,GAAG,GAAG,GAAG,GAAGA,EAAG,MAAMA,EAAG,eAAeO,CAAK,GAAGP,EAAG,kBAAkBM,CAAW,GAAGN,EAAG,cAAcK,CAAO,IAAGG,IAAAR,EAAG,aAAa,oBAAoB,MAApC,QAAAQ,EAAuC,eAAeD,EAAM,CAAC,KAAKA,EAAM,CAAC,IAAIN,EAAY,MAAMA,EAAY;AAAA,EACjP,GAAM,IAAGH;AACT;","x_google_ignoreList":[0]}