{"version":3,"file":"index372.js","sources":["../../../node_modules/.pnpm/pixi.js@8.8.1/node_modules/pixi.js/lib/utils/browser/detectVideoAlphaMode.mjs"],"sourcesContent":["\"use strict\";\nlet promise;\nasync function detectVideoAlphaMode() {\n  promise ?? (promise = (async () => {\n    const canvas = document.createElement(\"canvas\");\n    const gl = canvas.getContext(\"webgl\");\n    if (!gl) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const video = await new Promise((resolve) => {\n      const video2 = document.createElement(\"video\");\n      video2.onloadeddata = () => resolve(video2);\n      video2.onerror = () => resolve(null);\n      video2.autoplay = false;\n      video2.crossOrigin = \"anonymous\";\n      video2.preload = \"auto\";\n      video2.src = \"data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=\";\n      video2.load();\n    });\n    if (!video) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      texture,\n      0\n    );\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n    const pixel = new Uint8Array(4);\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n    gl.deleteFramebuffer(framebuffer);\n    gl.deleteTexture(texture);\n    gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n    return pixel[0] <= pixel[3] ? \"premultiplied-alpha\" : \"premultiply-alpha-on-upload\";\n  })());\n  return promise;\n}\n\nexport { detectVideoAlphaMode };\n//# sourceMappingURL=detectVideoAlphaMode.mjs.map\n"],"names":["promise","detectVideoAlphaMode","_a","gl","video","resolve","video2","texture","framebuffer","pixel"],"mappings":"AACA,IAAIA;AACJ,eAAeC,IAAuB;AACpC,SAAAD,MAAYA,KAAW,YAAY;AAFrC,QAAAE;AAII,UAAMC,IADS,SAAS,cAAc,QAAQ,EAC5B,WAAW,OAAO;AACpC,QAAI,CAACA;AACH,aAAO;AAET,UAAMC,IAAQ,MAAM,IAAI,QAAQ,CAACC,MAAY;AAC3C,YAAMC,IAAS,SAAS,cAAc,OAAO;AAC7C,MAAAA,EAAO,eAAe,MAAMD,EAAQC,CAAM,GAC1CA,EAAO,UAAU,MAAMD,EAAQ,IAAI,GACnCC,EAAO,WAAW,IAClBA,EAAO,cAAc,aACrBA,EAAO,UAAU,QACjBA,EAAO,MAAM,2sBACbA,EAAO,KAAI;AAAA,IACjB,CAAK;AACD,QAAI,CAACF;AACH,aAAO;AAET,UAAMG,IAAUJ,EAAG;AACnB,IAAAA,EAAG,YAAYA,EAAG,YAAYI,CAAO;AACrC,UAAMC,IAAcL,EAAG;AACvB,IAAAA,EAAG,gBAAgBA,EAAG,aAAaK,CAAW,GAC9CL,EAAG;AAAA,MACDA,EAAG;AAAA,MACHA,EAAG;AAAA,MACHA,EAAG;AAAA,MACHI;AAAA,MACA;AAAA,IACN,GACIJ,EAAG,YAAYA,EAAG,gCAAgC,EAAK,GACvDA,EAAG,YAAYA,EAAG,oCAAoCA,EAAG,IAAI,GAC7DA,EAAG,WAAWA,EAAG,YAAY,GAAGA,EAAG,MAAMA,EAAG,MAAMA,EAAG,eAAeC,CAAK;AACzE,UAAMK,IAAQ,IAAI,WAAW,CAAC;AAC9B,WAAAN,EAAG,WAAW,GAAG,GAAG,GAAG,GAAGA,EAAG,MAAMA,EAAG,eAAeM,CAAK,GAC1DN,EAAG,kBAAkBK,CAAW,GAChCL,EAAG,cAAcI,CAAO,IACxBL,IAAAC,EAAG,aAAa,oBAAoB,MAApC,QAAAD,EAAuC,eAChCO,EAAM,CAAC,KAAKA,EAAM,CAAC,IAAI,wBAAwB;AAAA,EACvD,GAAA,IACMT;AACT;","x_google_ignoreList":[0]}