{"version":3,"file":"index352.js","sources":["../../../node_modules/.pnpm/pixi.js@8.8.1/node_modules/pixi.js/lib/assets/loader/parsers/textures/loadSVG.mjs"],"sourcesContent":["import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validSVGExtension = \".svg\";\nconst validSVGMIME = \"image/svg+xml\";\nconst loadSvg = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadSVG\"\n  },\n  name: \"loadSVG\",\n  config: {\n    crossOrigin: \"anonymous\",\n    parseAsGraphicsContext: false\n  },\n  test(url) {\n    return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n  },\n  async load(url, asset, loader) {\n    if (asset.data?.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext) {\n      return loadAsGraphics(url);\n    }\n    return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n  },\n  unload(asset) {\n    asset.destroy(true);\n  }\n};\nasync function loadAsTexture(url, asset, loader, crossOrigin) {\n  const response = await DOMAdapter.get().fetch(url);\n  const blob = await response.blob();\n  const blobUrl = URL.createObjectURL(blob);\n  const image = new Image();\n  image.src = blobUrl;\n  image.crossOrigin = crossOrigin;\n  await image.decode();\n  URL.revokeObjectURL(blobUrl);\n  const canvas = document.createElement(\"canvas\");\n  const context = canvas.getContext(\"2d\");\n  const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n  const width = asset.data?.width ?? image.width;\n  const height = asset.data?.height ?? image.height;\n  canvas.width = width * resolution;\n  canvas.height = height * resolution;\n  context.drawImage(image, 0, 0, width * resolution, height * resolution);\n  const { parseAsGraphicsContext: _p, ...rest } = asset.data ?? {};\n  const base = new ImageSource({\n    resource: canvas,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    resolution,\n    ...rest\n  });\n  return createTexture(base, loader, url);\n}\nasync function loadAsGraphics(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  const svgSource = await response.text();\n  const context = new GraphicsContext();\n  context.svg(svgSource);\n  return context;\n}\n\nexport { loadSvg };\n//# sourceMappingURL=loadSVG.mjs.map\n"],"names":["validSVGExtension","validSVGMIME","loadSvg","ExtensionType","LoaderParserPriority","url","checkDataUrl","checkExtension","asset","loader","_a","loadAsGraphics","loadAsTexture","crossOrigin","blob","DOMAdapter","blobUrl","image","canvas","context","resolution","getResolutionOfUrl","width","_b","height","_c","_p","rest","base","ImageSource","createTexture","svgSource","GraphicsContext"],"mappings":";;;;;;;;;AAWA,MAAMA,IAAoB,QACpBC,IAAe,iBACfC,IAAU;AAAA,EACd,WAAW;AAAA,IACT,MAAMC,EAAc;AAAA,IACpB,UAAUC,EAAqB;AAAA,IAC/B,MAAM;AAAA,EACP;AAAA,EACD,MAAM;AAAA,EACN,QAAQ;AAAA,IACN,aAAa;AAAA,IACb,wBAAwB;AAAA,EACzB;AAAA,EACD,KAAKC,GAAK;AACR,WAAOC,EAAaD,GAAKJ,CAAY,KAAKM,EAAeF,GAAKL,CAAiB;AAAA,EAChF;AAAA,EACD,MAAM,KAAKK,GAAKG,GAAOC,GAAQ;;AAC7B,aAAIC,IAAAF,EAAM,SAAN,gBAAAE,EAAY,2BAA0B,KAAK,OAAO,yBAC7CC,EAAeN,CAAG,IAEpBO,EAAcP,GAAKG,GAAOC,GAAQ,KAAK,OAAO,WAAW;AAAA,EACjE;AAAA,EACD,OAAOD,GAAO;AACZ,IAAAA,EAAM,QAAQ,EAAI;AAAA,EACnB;AACH;AACA,eAAeI,EAAcP,GAAKG,GAAOC,GAAQI,GAAa;;AAE5D,QAAMC,IAAO,OADI,MAAMC,EAAW,IAAG,EAAG,MAAMV,CAAG,GACrB,QACtBW,IAAU,IAAI,gBAAgBF,CAAI,GAClCG,IAAQ,IAAI;AAClB,EAAAA,EAAM,MAAMD,GACZC,EAAM,cAAcJ,GACpB,MAAMI,EAAM,UACZ,IAAI,gBAAgBD,CAAO;AAC3B,QAAME,IAAS,SAAS,cAAc,QAAQ,GACxCC,IAAUD,EAAO,WAAW,IAAI,GAChCE,MAAaV,IAAAF,EAAM,SAAN,gBAAAE,EAAY,eAAcW,EAAmBhB,CAAG,GAC7DiB,MAAQC,IAAAf,EAAM,SAAN,gBAAAe,EAAY,UAASN,EAAM,OACnCO,MAASC,IAAAjB,EAAM,SAAN,gBAAAiB,EAAY,WAAUR,EAAM;AAC3C,EAAAC,EAAO,QAAQI,IAAQF,GACvBF,EAAO,SAASM,IAASJ,GACzBD,EAAQ,UAAUF,GAAO,GAAG,GAAGK,IAAQF,GAAYI,IAASJ,CAAU;AACtE,QAAM,EAAE,wBAAwBM,GAAI,GAAGC,EAAI,IAAKnB,EAAM,QAAQ,IACxDoB,IAAO,IAAIC,EAAY;AAAA,IAC3B,UAAUX;AAAA,IACV,WAAW;AAAA,IACX,YAAAE;AAAA,IACA,GAAGO;AAAA,EACP,CAAG;AACD,SAAOG,EAAcF,GAAMnB,GAAQJ,CAAG;AACxC;AACA,eAAeM,EAAeN,GAAK;AAEjC,QAAM0B,IAAY,OADD,MAAMhB,EAAW,IAAG,EAAG,MAAMV,CAAG,GAChB,QAC3Bc,IAAU,IAAIa;AACpB,SAAAb,EAAQ,IAAIY,CAAS,GACdZ;AACT;","x_google_ignoreList":[0]}