{"version":3,"file":"index447.js","sources":["../../../node_modules/.pnpm/pixi.js@8.8.1/node_modules/pixi.js/lib/scene/container/bounds/getGlobalBounds.mjs"],"sourcesContent":["import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getGlobalBounds(target, skipUpdateTransform, bounds) {\n  bounds.clear();\n  let parentTransform;\n  let pooledMatrix;\n  if (target.parent) {\n    if (!skipUpdateTransform) {\n      pooledMatrix = matrixPool.get().identity();\n      parentTransform = updateTransformBackwards(target, pooledMatrix);\n    } else {\n      parentTransform = target.parent.worldTransform;\n    }\n  } else {\n    parentTransform = Matrix.IDENTITY;\n  }\n  _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n  if (pooledMatrix) {\n    matrixPool.return(pooledMatrix);\n  }\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform) {\n  if (!target.visible || !target.measurable)\n    return;\n  let worldTransform;\n  if (!skipUpdateTransform) {\n    target.updateLocalTransform();\n    worldTransform = matrixPool.get();\n    worldTransform.appendFrom(target.localTransform, parentTransform);\n  } else {\n    worldTransform = target.worldTransform;\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, worldTransform);\n  } else {\n    if (target.bounds) {\n      bounds.matrix = worldTransform;\n      bounds.addBounds(target.bounds);\n    }\n    for (let i = 0; i < target.children.length; i++) {\n      _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addBounds?.(bounds);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  if (!skipUpdateTransform) {\n    matrixPool.return(worldTransform);\n  }\n}\nfunction updateTransformBackwards(target, parentTransform) {\n  const parent = target.parent;\n  if (parent) {\n    updateTransformBackwards(parent, parentTransform);\n    parent.updateLocalTransform();\n    parentTransform.append(parent.localTransform);\n  }\n  return parentTransform;\n}\n\nexport { _getGlobalBounds, getGlobalBounds, updateTransformBackwards };\n//# sourceMappingURL=getGlobalBounds.mjs.map\n"],"names":["getGlobalBounds","target","skipUpdateTransform","bounds","parentTransform","pooledMatrix","matrixPool","updateTransformBackwards","Matrix","_getGlobalBounds","worldTransform","parentBounds","preserveBounds","boundsPool","i","_b","_a","parent"],"mappings":";;AAIA,SAASA,EAAgBC,GAAQC,GAAqBC,GAAQ;AAC5D,EAAAA,EAAO,MAAK;AACZ,MAAIC,GACAC;AACJ,SAAIJ,EAAO,SACJC,IAIHE,IAAkBH,EAAO,OAAO,kBAHhCI,IAAeC,EAAW,IAAK,EAAC,SAAQ,GACxCF,IAAkBG,EAAyBN,GAAQI,CAAY,KAKjED,IAAkBI,EAAO,UAE3BC,EAAiBR,GAAQE,GAAQC,GAAiBF,CAAmB,GACjEG,KACFC,EAAW,OAAOD,CAAY,GAE3BF,EAAO,WACVA,EAAO,IAAI,GAAG,GAAG,GAAG,CAAC,GAEhBA;AACT;AACA,SAASM,EAAiBR,GAAQE,GAAQC,GAAiBF,GAAqB;;AAC9E,MAAI,CAACD,EAAO,WAAW,CAACA,EAAO;AAC7B;AACF,MAAIS;AACJ,EAAKR,IAKHQ,IAAiBT,EAAO,kBAJxBA,EAAO,qBAAoB,GAC3BS,IAAiBJ,EAAW,OAC5BI,EAAe,WAAWT,EAAO,gBAAgBG,CAAe;AAIlE,QAAMO,IAAeR,GACfS,IAAiB,CAAC,CAACX,EAAO,QAAQ;AAIxC,MAHIW,MACFT,IAASU,EAAW,IAAK,EAAC,MAAK,IAE7BZ,EAAO;AACT,IAAAE,EAAO,QAAQF,EAAO,YAAYS,CAAc;AAAA,OAC3C;AACL,IAAIT,EAAO,WACTE,EAAO,SAASO,GAChBP,EAAO,UAAUF,EAAO,MAAM;AAEhC,aAASa,IAAI,GAAGA,IAAIb,EAAO,SAAS,QAAQa;AAC1C,MAAAL,EAAiBR,EAAO,SAASa,CAAC,GAAGX,GAAQO,GAAgBR,CAAmB;AAAA,EAEnF;AACD,MAAIU,GAAgB;AAClB,aAASE,IAAI,GAAGA,IAAIb,EAAO,QAAQ,QAAQa;AACzC,OAAAC,KAAAC,IAAAf,EAAO,QAAQa,CAAC,GAAE,cAAlB,QAAAC,EAAA,KAAAC,GAA8Bb;AAEhC,IAAAQ,EAAa,UAAUR,GAAQK,EAAO,QAAQ,GAC9CK,EAAW,OAAOV,CAAM;AAAA,EACzB;AACD,EAAKD,KACHI,EAAW,OAAOI,CAAc;AAEpC;AACA,SAASH,EAAyBN,GAAQG,GAAiB;AACzD,QAAMa,IAAShB,EAAO;AACtB,SAAIgB,MACFV,EAAyBU,GAAQb,CAAe,GAChDa,EAAO,qBAAoB,GAC3Bb,EAAgB,OAAOa,EAAO,cAAc,IAEvCb;AACT;","x_google_ignoreList":[0]}