{"version":3,"file":"index394.js","sources":["../../../node_modules/.pnpm/pixi.js@8.8.1/node_modules/pixi.js/lib/rendering/renderers/gpu/shader/BindGroup.mjs"],"sourcesContent":["\"use strict\";\nclass BindGroup {\n  /**\n   * Create a new instance eof the Bind Group.\n   * @param resources - The resources that are bound together for use by a shader.\n   */\n  constructor(resources) {\n    /** The resources that are bound together for use by a shader. */\n    this.resources = /* @__PURE__ */ Object.create(null);\n    this._dirty = true;\n    let index = 0;\n    for (const i in resources) {\n      const resource = resources[i];\n      this.setResource(resource, index++);\n    }\n    this._updateKey();\n  }\n  /**\n   * Updates the key if its flagged as dirty. This is used internally to\n   * match this bind group to a WebGPU BindGroup.\n   * @internal\n   * @ignore\n   */\n  _updateKey() {\n    if (!this._dirty)\n      return;\n    this._dirty = false;\n    const keyParts = [];\n    let index = 0;\n    for (const i in this.resources) {\n      keyParts[index++] = this.resources[i]._resourceId;\n    }\n    this._key = keyParts.join(\"|\");\n  }\n  /**\n   * Set a resource at a given index. this function will\n   * ensure that listeners will be removed from the current resource\n   * and added to the new resource.\n   * @param resource - The resource to set.\n   * @param index - The index to set the resource at.\n   */\n  setResource(resource, index) {\n    const currentResource = this.resources[index];\n    if (resource === currentResource)\n      return;\n    if (currentResource) {\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    resource.on?.(\"change\", this.onResourceChange, this);\n    this.resources[index] = resource;\n    this._dirty = true;\n  }\n  /**\n   * Returns the resource at the current specified index.\n   * @param index - The index of the resource to get.\n   * @returns - The resource at the specified index.\n   */\n  getResource(index) {\n    return this.resources[index];\n  }\n  /**\n   * Used internally to 'touch' each resource, to ensure that the GC\n   * knows that all resources in this bind group are still being used.\n   * @param tick - The current tick.\n   * @internal\n   * @ignore\n   */\n  _touch(tick) {\n    const resources = this.resources;\n    for (const i in resources) {\n      resources[i]._touched = tick;\n    }\n  }\n  /** Destroys this bind group and removes all listeners. */\n  destroy() {\n    const resources = this.resources;\n    for (const i in resources) {\n      const resource = resources[i];\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    this.resources = null;\n  }\n  onResourceChange(resource) {\n    this._dirty = true;\n    if (resource.destroyed) {\n      const resources = this.resources;\n      for (const i in resources) {\n        if (resources[i] === resource) {\n          resources[i] = null;\n        }\n      }\n    } else {\n      this._updateKey();\n    }\n  }\n}\n\nexport { BindGroup };\n//# sourceMappingURL=BindGroup.mjs.map\n"],"names":["BindGroup","resources","index","i","resource","keyParts","_a","_b","currentResource","tick"],"mappings":"AACA,MAAMA,EAAU;AAAA;AAAA;AAAA;AAAA;AAAA,EAKd,YAAYC,GAAW;AAErB,SAAK,YAA4B,uBAAO,OAAO,IAAI,GACnD,KAAK,SAAS;AACd,QAAIC,IAAQ;AACZ,eAAWC,KAAKF,GAAW;AACzB,YAAMG,IAAWH,EAAUE,CAAC;AAC5B,WAAK,YAAYC,GAAUF,GAAO;AAAA,IACnC;AACD,SAAK,WAAU;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOD,aAAa;AACX,QAAI,CAAC,KAAK;AACR;AACF,SAAK,SAAS;AACd,UAAMG,IAAW,CAAA;AACjB,QAAIH,IAAQ;AACZ,eAAWC,KAAK,KAAK;AACnB,MAAAE,EAASH,GAAO,IAAI,KAAK,UAAUC,CAAC,EAAE;AAExC,SAAK,OAAOE,EAAS,KAAK,GAAG;AAAA,EAC9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQD,YAAYD,GAAUF,GAAO;AAxC/B,QAAAI,GAAAC;AAyCI,UAAMC,IAAkB,KAAK,UAAUN,CAAK;AAC5C,IAAIE,MAAaI,MAEbA,OACFF,IAAAF,EAAS,QAAT,QAAAE,EAAA,KAAAF,GAAe,UAAU,KAAK,kBAAkB,SAElDG,IAAAH,EAAS,OAAT,QAAAG,EAAA,KAAAH,GAAc,UAAU,KAAK,kBAAkB,OAC/C,KAAK,UAAUF,CAAK,IAAIE,GACxB,KAAK,SAAS;AAAA,EACf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAMD,YAAYF,GAAO;AACjB,WAAO,KAAK,UAAUA,CAAK;AAAA,EAC5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQD,OAAOO,GAAM;AACX,UAAMR,IAAY,KAAK;AACvB,eAAWE,KAAKF;AACd,MAAAA,EAAUE,CAAC,EAAE,WAAWM;AAAA,EAE3B;AAAA;AAAA,EAED,UAAU;AAzEZ,QAAAH;AA0EI,UAAML,IAAY,KAAK;AACvB,eAAWE,KAAKF,GAAW;AACzB,YAAMG,IAAWH,EAAUE,CAAC;AAC5B,OAAAG,IAAAF,EAAS,QAAT,QAAAE,EAAA,KAAAF,GAAe,UAAU,KAAK,kBAAkB;AAAA,IACjD;AACD,SAAK,YAAY;AAAA,EAClB;AAAA,EACD,iBAAiBA,GAAU;AAEzB,QADA,KAAK,SAAS,IACVA,EAAS,WAAW;AACtB,YAAMH,IAAY,KAAK;AACvB,iBAAWE,KAAKF;AACd,QAAIA,EAAUE,CAAC,MAAMC,MACnBH,EAAUE,CAAC,IAAI;AAAA,IAGzB;AACM,WAAK,WAAU;AAAA,EAElB;AACH;","x_google_ignoreList":[0]}