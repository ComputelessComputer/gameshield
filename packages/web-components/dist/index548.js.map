{"version":3,"file":"index548.js","sources":["../../../node_modules/.pnpm/pixi.js@8.8.1/node_modules/pixi.js/lib/scene/sprite-nine-slice/NineSliceSpritePipe.mjs"],"sourcesContent":["import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh.mjs';\nimport { NineSliceGeometry } from './NineSliceGeometry.mjs';\n\n\"use strict\";\nclass NineSliceSpritePipe {\n  constructor(renderer) {\n    this._gpuSpriteHash = /* @__PURE__ */ Object.create(null);\n    this._destroyRenderableBound = this.destroyRenderable.bind(this);\n    this._renderer = renderer;\n    this._renderer.renderableGC.addManagedHash(this, \"_gpuSpriteHash\");\n  }\n  addRenderable(sprite, instructionSet) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    this._renderer.renderPipes.batch.addToBatch(gpuSprite, instructionSet);\n  }\n  updateRenderable(sprite) {\n    const gpuSprite = this._gpuSpriteHash[sprite.uid];\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    gpuSprite._batcher.updateElement(gpuSprite);\n  }\n  validateRenderable(sprite) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    return !gpuSprite._batcher.checkAndUpdateTexture(\n      gpuSprite,\n      sprite._texture\n    );\n  }\n  destroyRenderable(sprite) {\n    const batchableMesh = this._gpuSpriteHash[sprite.uid];\n    BigPool.return(batchableMesh.geometry);\n    BigPool.return(batchableMesh);\n    this._gpuSpriteHash[sprite.uid] = null;\n    sprite.off(\"destroyed\", this._destroyRenderableBound);\n  }\n  _updateBatchableSprite(sprite, batchableSprite) {\n    batchableSprite.geometry.update(sprite);\n    batchableSprite.setTexture(sprite._texture);\n  }\n  _getGpuSprite(sprite) {\n    return this._gpuSpriteHash[sprite.uid] || this._initGPUSprite(sprite);\n  }\n  _initGPUSprite(sprite) {\n    const batchableMesh = BigPool.get(BatchableMesh);\n    batchableMesh.geometry = BigPool.get(NineSliceGeometry);\n    batchableMesh.renderable = sprite;\n    batchableMesh.transform = sprite.groupTransform;\n    batchableMesh.texture = sprite._texture;\n    batchableMesh.roundPixels = this._renderer._roundPixels | sprite._roundPixels;\n    this._gpuSpriteHash[sprite.uid] = batchableMesh;\n    if (!sprite.didViewUpdate) {\n      this._updateBatchableSprite(sprite, batchableMesh);\n    }\n    sprite.on(\"destroyed\", this._destroyRenderableBound);\n    return batchableMesh;\n  }\n  destroy() {\n    for (const i in this._gpuSpriteHash) {\n      const batchableMesh = this._gpuSpriteHash[i];\n      batchableMesh.geometry.destroy();\n    }\n    this._gpuSpriteHash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nNineSliceSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"nineSliceSprite\"\n};\n\nexport { NineSliceSpritePipe };\n//# sourceMappingURL=NineSliceSpritePipe.mjs.map\n"],"names":["NineSliceSpritePipe","renderer","sprite","instructionSet","gpuSprite","batchableMesh","BigPool","batchableSprite","BatchableMesh","NineSliceGeometry","i","ExtensionType"],"mappings":";;;;AAMA,MAAMA,EAAoB;AAAA,EACxB,YAAYC,GAAU;AACpB,SAAK,iBAAiC,uBAAO,OAAO,IAAI,GACxD,KAAK,0BAA0B,KAAK,kBAAkB,KAAK,IAAI,GAC/D,KAAK,YAAYA,GACjB,KAAK,UAAU,aAAa,eAAe,MAAM,gBAAgB;AAAA,EAClE;AAAA,EACD,cAAcC,GAAQC,GAAgB;AACpC,UAAMC,IAAY,KAAK,cAAcF,CAAM;AAC3C,IAAIA,EAAO,iBACT,KAAK,uBAAuBA,GAAQE,CAAS,GAC/C,KAAK,UAAU,YAAY,MAAM,WAAWA,GAAWD,CAAc;AAAA,EACtE;AAAA,EACD,iBAAiBD,GAAQ;AACvB,UAAME,IAAY,KAAK,eAAeF,EAAO,GAAG;AAChD,IAAIA,EAAO,iBACT,KAAK,uBAAuBA,GAAQE,CAAS,GAC/CA,EAAU,SAAS,cAAcA,CAAS;AAAA,EAC3C;AAAA,EACD,mBAAmBF,GAAQ;AACzB,UAAME,IAAY,KAAK,cAAcF,CAAM;AAC3C,WAAO,CAACE,EAAU,SAAS;AAAA,MACzBA;AAAA,MACAF,EAAO;AAAA,IACb;AAAA,EACG;AAAA,EACD,kBAAkBA,GAAQ;AACxB,UAAMG,IAAgB,KAAK,eAAeH,EAAO,GAAG;AACpD,IAAAI,EAAQ,OAAOD,EAAc,QAAQ,GACrCC,EAAQ,OAAOD,CAAa,GAC5B,KAAK,eAAeH,EAAO,GAAG,IAAI,MAClCA,EAAO,IAAI,aAAa,KAAK,uBAAuB;AAAA,EACrD;AAAA,EACD,uBAAuBA,GAAQK,GAAiB;AAC9C,IAAAA,EAAgB,SAAS,OAAOL,CAAM,GACtCK,EAAgB,WAAWL,EAAO,QAAQ;AAAA,EAC3C;AAAA,EACD,cAAcA,GAAQ;AACpB,WAAO,KAAK,eAAeA,EAAO,GAAG,KAAK,KAAK,eAAeA,CAAM;AAAA,EACrE;AAAA,EACD,eAAeA,GAAQ;AACrB,UAAMG,IAAgBC,EAAQ,IAAIE,CAAa;AAC/C,WAAAH,EAAc,WAAWC,EAAQ,IAAIG,CAAiB,GACtDJ,EAAc,aAAaH,GAC3BG,EAAc,YAAYH,EAAO,gBACjCG,EAAc,UAAUH,EAAO,UAC/BG,EAAc,cAAc,KAAK,UAAU,eAAeH,EAAO,cACjE,KAAK,eAAeA,EAAO,GAAG,IAAIG,GAC7BH,EAAO,iBACV,KAAK,uBAAuBA,GAAQG,CAAa,GAEnDH,EAAO,GAAG,aAAa,KAAK,uBAAuB,GAC5CG;AAAA,EACR;AAAA,EACD,UAAU;AACR,eAAWK,KAAK,KAAK;AAEnB,MADsB,KAAK,eAAeA,CAAC,EAC7B,SAAS;AAEzB,SAAK,iBAAiB,MACtB,KAAK,YAAY;AAAA,EAClB;AACH;AAEAV,EAAoB,YAAY;AAAA,EAC9B,MAAM;AAAA,IACJW,EAAc;AAAA,IACdA,EAAc;AAAA,IACdA,EAAc;AAAA,EACf;AAAA,EACD,MAAM;AACR;","x_google_ignoreList":[0]}