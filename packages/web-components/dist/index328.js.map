{"version":3,"file":"index328.js","sources":["../../../node_modules/.pnpm/pixi.js@8.8.1/node_modules/pixi.js/lib/accessibility/AccessibilitySystem.mjs"],"sourcesContent":["import { FederatedEvent } from '../events/FederatedEvent.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { isMobile } from '../utils/browser/isMobile.mjs';\nimport { removeItems } from '../utils/data/removeItems.mjs';\n\n\"use strict\";\nconst KEY_CODE_TAB = 9;\nconst DIV_TOUCH_SIZE = 100;\nconst DIV_TOUCH_POS_X = 0;\nconst DIV_TOUCH_POS_Y = 0;\nconst DIV_TOUCH_ZINDEX = 2;\nconst DIV_HOOK_SIZE = 1;\nconst DIV_HOOK_POS_X = -1e3;\nconst DIV_HOOK_POS_Y = -1e3;\nconst DIV_HOOK_ZINDEX = 2;\nconst _AccessibilitySystem = class _AccessibilitySystem {\n  // 2fps\n  // eslint-disable-next-line jsdoc/require-param\n  /**\n   * @param {WebGLRenderer|WebGPURenderer} renderer - A reference to the current renderer\n   */\n  constructor(renderer, _mobileInfo = isMobile) {\n    this._mobileInfo = _mobileInfo;\n    /** Whether accessibility divs are visible for debugging */\n    this.debug = false;\n    /** Whether to activate on tab key press */\n    this._activateOnTab = true;\n    /** Whether to deactivate accessibility when mouse moves */\n    this._deactivateOnMouseMove = true;\n    /** Internal variable, see isActive getter. */\n    this._isActive = false;\n    /** Internal variable, see isMobileAccessibility getter. */\n    this._isMobileAccessibility = false;\n    /** This is the dom element that will sit over the PixiJS element. This is where the div overlays will go. */\n    this._div = null;\n    /** A simple pool for storing divs. */\n    this._pool = [];\n    /** This is a tick used to check if an object is no longer being rendered. */\n    this._renderId = 0;\n    /** The array of currently active accessible items. */\n    this._children = [];\n    /** Count to throttle div updates on android devices. */\n    this._androidUpdateCount = 0;\n    /**  The frequency to update the div elements. */\n    this._androidUpdateFrequency = 500;\n    this._hookDiv = null;\n    if (_mobileInfo.tablet || _mobileInfo.phone) {\n      this._createTouchHook();\n    }\n    this._renderer = renderer;\n  }\n  /**\n   * Value of `true` if accessibility is currently active and accessibility layers are showing.\n   * @member {boolean}\n   * @readonly\n   */\n  get isActive() {\n    return this._isActive;\n  }\n  /**\n   * Value of `true` if accessibility is enabled for touch devices.\n   * @member {boolean}\n   * @readonly\n   */\n  get isMobileAccessibility() {\n    return this._isMobileAccessibility;\n  }\n  get hookDiv() {\n    return this._hookDiv;\n  }\n  /**\n   * Creates the touch hooks.\n   * @private\n   */\n  _createTouchHook() {\n    const hookDiv = document.createElement(\"button\");\n    hookDiv.style.width = `${DIV_HOOK_SIZE}px`;\n    hookDiv.style.height = `${DIV_HOOK_SIZE}px`;\n    hookDiv.style.position = \"absolute\";\n    hookDiv.style.top = `${DIV_HOOK_POS_X}px`;\n    hookDiv.style.left = `${DIV_HOOK_POS_Y}px`;\n    hookDiv.style.zIndex = DIV_HOOK_ZINDEX.toString();\n    hookDiv.style.backgroundColor = \"#FF0000\";\n    hookDiv.title = \"select to enable accessibility for this content\";\n    hookDiv.addEventListener(\"focus\", () => {\n      this._isMobileAccessibility = true;\n      this._activate();\n      this._destroyTouchHook();\n    });\n    document.body.appendChild(hookDiv);\n    this._hookDiv = hookDiv;\n  }\n  /**\n   * Destroys the touch hooks.\n   * @private\n   */\n  _destroyTouchHook() {\n    if (!this._hookDiv) {\n      return;\n    }\n    document.body.removeChild(this._hookDiv);\n    this._hookDiv = null;\n  }\n  /**\n   * Activating will cause the Accessibility layer to be shown.\n   * This is called when a user presses the tab key.\n   * @private\n   */\n  _activate() {\n    if (this._isActive) {\n      return;\n    }\n    this._isActive = true;\n    if (!this._div) {\n      this._div = document.createElement(\"div\");\n      this._div.style.width = `${DIV_TOUCH_SIZE}px`;\n      this._div.style.height = `${DIV_TOUCH_SIZE}px`;\n      this._div.style.position = \"absolute\";\n      this._div.style.top = `${DIV_TOUCH_POS_X}px`;\n      this._div.style.left = `${DIV_TOUCH_POS_Y}px`;\n      this._div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n      this._div.style.pointerEvents = \"none\";\n    }\n    if (this._activateOnTab) {\n      this._onKeyDown = this._onKeyDown.bind(this);\n      globalThis.addEventListener(\"keydown\", this._onKeyDown, false);\n    }\n    if (this._deactivateOnMouseMove) {\n      this._onMouseMove = this._onMouseMove.bind(this);\n      globalThis.document.addEventListener(\"mousemove\", this._onMouseMove, true);\n    }\n    const canvas = this._renderer.view.canvas;\n    if (!canvas.parentNode) {\n      const observer = new MutationObserver(() => {\n        if (canvas.parentNode) {\n          canvas.parentNode.appendChild(this._div);\n          observer.disconnect();\n          this._initAccessibilitySetup();\n        }\n      });\n      observer.observe(document.body, { childList: true, subtree: true });\n    } else {\n      canvas.parentNode.appendChild(this._div);\n      this._initAccessibilitySetup();\n    }\n  }\n  // New method to handle initialization after div is ready\n  _initAccessibilitySetup() {\n    this._renderer.runners.postrender.add(this);\n    if (this._renderer.lastObjectRendered) {\n      this._updateAccessibleObjects(this._renderer.lastObjectRendered);\n    }\n  }\n  /**\n   * Deactivates the accessibility system. Removes listeners and accessibility elements.\n   * @private\n   */\n  _deactivate() {\n    if (!this._isActive || this._isMobileAccessibility) {\n      return;\n    }\n    this._isActive = false;\n    globalThis.document.removeEventListener(\"mousemove\", this._onMouseMove, true);\n    if (this._activateOnTab) {\n      globalThis.addEventListener(\"keydown\", this._onKeyDown, false);\n    }\n    this._renderer.runners.postrender.remove(this);\n    for (const child of this._children) {\n      if (child._accessibleDiv && child._accessibleDiv.parentNode) {\n        child._accessibleDiv.parentNode.removeChild(child._accessibleDiv);\n        child._accessibleDiv = null;\n      }\n      child._accessibleActive = false;\n    }\n    this._pool.forEach((div) => {\n      if (div.parentNode) {\n        div.parentNode.removeChild(div);\n      }\n    });\n    if (this._div && this._div.parentNode) {\n      this._div.parentNode.removeChild(this._div);\n    }\n    this._pool = [];\n    this._children = [];\n  }\n  /**\n   * This recursive function will run through the scene graph and add any new accessible objects to the DOM layer.\n   * @private\n   * @param {Container} container - The Container to check.\n   */\n  _updateAccessibleObjects(container) {\n    if (!container.visible || !container.accessibleChildren) {\n      return;\n    }\n    if (container.accessible) {\n      if (!container._accessibleActive) {\n        this._addChild(container);\n      }\n      container._renderId = this._renderId;\n    }\n    const children = container.children;\n    if (children) {\n      for (let i = 0; i < children.length; i++) {\n        this._updateAccessibleObjects(children[i]);\n      }\n    }\n  }\n  /**\n   * Runner init called, view is available at this point.\n   * @ignore\n   */\n  init(options) {\n    const defaultOpts = _AccessibilitySystem.defaultOptions;\n    const mergedOptions = {\n      accessibilityOptions: {\n        ...defaultOpts,\n        ...options?.accessibilityOptions || {}\n      }\n    };\n    this.debug = mergedOptions.accessibilityOptions.debug;\n    this._activateOnTab = mergedOptions.accessibilityOptions.activateOnTab;\n    this._deactivateOnMouseMove = mergedOptions.accessibilityOptions.deactivateOnMouseMove;\n    if (mergedOptions.accessibilityOptions.enabledByDefault) {\n      this._activate();\n    } else if (this._activateOnTab) {\n      this._onKeyDown = this._onKeyDown.bind(this);\n      globalThis.addEventListener(\"keydown\", this._onKeyDown, false);\n    }\n    this._renderer.runners.postrender.remove(this);\n  }\n  /**\n   * Updates the accessibility layer during rendering.\n   * - Removes divs for containers no longer in the scene\n   * - Updates the position and dimensions of the root div\n   * - Updates positions of active accessibility divs\n   * Only fires while the accessibility system is active.\n   * @ignore\n   */\n  postrender() {\n    const now = performance.now();\n    if (this._mobileInfo.android.device && now < this._androidUpdateCount) {\n      return;\n    }\n    this._androidUpdateCount = now + this._androidUpdateFrequency;\n    if (!this._renderer.renderingToScreen || !this._renderer.view.canvas) {\n      return;\n    }\n    const activeIds = /* @__PURE__ */ new Set();\n    if (this._renderer.lastObjectRendered) {\n      this._updateAccessibleObjects(this._renderer.lastObjectRendered);\n      for (const child of this._children) {\n        if (child._renderId === this._renderId) {\n          activeIds.add(this._children.indexOf(child));\n        }\n      }\n    }\n    for (let i = this._children.length - 1; i >= 0; i--) {\n      const child = this._children[i];\n      if (!activeIds.has(i)) {\n        if (child._accessibleDiv && child._accessibleDiv.parentNode) {\n          child._accessibleDiv.parentNode.removeChild(child._accessibleDiv);\n          this._pool.push(child._accessibleDiv);\n          child._accessibleDiv = null;\n        }\n        child._accessibleActive = false;\n        removeItems(this._children, i, 1);\n      }\n    }\n    if (this._renderer.renderingToScreen) {\n      const { x, y, width: viewWidth, height: viewHeight } = this._renderer.screen;\n      const div = this._div;\n      div.style.left = `${x}px`;\n      div.style.top = `${y}px`;\n      div.style.width = `${viewWidth}px`;\n      div.style.height = `${viewHeight}px`;\n    }\n    for (let i = 0; i < this._children.length; i++) {\n      const child = this._children[i];\n      if (!child._accessibleActive || !child._accessibleDiv) {\n        continue;\n      }\n      const div = child._accessibleDiv;\n      const hitArea = child.hitArea || child.getBounds().rectangle;\n      if (child.hitArea) {\n        const wt = child.worldTransform;\n        const sx = this._renderer.resolution;\n        const sy = this._renderer.resolution;\n        div.style.left = `${(wt.tx + hitArea.x * wt.a) * sx}px`;\n        div.style.top = `${(wt.ty + hitArea.y * wt.d) * sy}px`;\n        div.style.width = `${hitArea.width * wt.a * sx}px`;\n        div.style.height = `${hitArea.height * wt.d * sy}px`;\n      } else {\n        this._capHitArea(hitArea);\n        const sx = this._renderer.resolution;\n        const sy = this._renderer.resolution;\n        div.style.left = `${hitArea.x * sx}px`;\n        div.style.top = `${hitArea.y * sy}px`;\n        div.style.width = `${hitArea.width * sx}px`;\n        div.style.height = `${hitArea.height * sy}px`;\n      }\n    }\n    this._renderId++;\n  }\n  /**\n   * private function that will visually add the information to the\n   * accessibility div\n   * @param {HTMLElement} div -\n   */\n  _updateDebugHTML(div) {\n    div.innerHTML = `type: ${div.type}</br> title : ${div.title}</br> tabIndex: ${div.tabIndex}`;\n  }\n  /**\n   * Adjust the hit area based on the bounds of a display object\n   * @param {Rectangle} hitArea - Bounds of the child\n   */\n  _capHitArea(hitArea) {\n    if (hitArea.x < 0) {\n      hitArea.width += hitArea.x;\n      hitArea.x = 0;\n    }\n    if (hitArea.y < 0) {\n      hitArea.height += hitArea.y;\n      hitArea.y = 0;\n    }\n    const { width: viewWidth, height: viewHeight } = this._renderer;\n    if (hitArea.x + hitArea.width > viewWidth) {\n      hitArea.width = viewWidth - hitArea.x;\n    }\n    if (hitArea.y + hitArea.height > viewHeight) {\n      hitArea.height = viewHeight - hitArea.y;\n    }\n  }\n  /**\n   * Creates or reuses a div element for a Container and adds it to the accessibility layer.\n   * Sets up ARIA attributes, event listeners, and positioning based on the container's properties.\n   * @private\n   * @param {Container} container - The child to make accessible.\n   */\n  _addChild(container) {\n    let div = this._pool.pop();\n    if (!div) {\n      if (container.accessibleType === \"button\") {\n        div = document.createElement(\"button\");\n      } else {\n        div = document.createElement(container.accessibleType);\n        div.style.cssText = `\n                        color: transparent;\n                        pointer-events: none;\n                        padding: 0;\n                        margin: 0;\n                        border: 0;\n                        outline: 0;\n                        background: transparent;\n                        box-sizing: border-box;\n                        user-select: none;\n                        -webkit-user-select: none;\n                        -moz-user-select: none;\n                        -ms-user-select: none;\n                    `;\n        if (container.accessibleText) {\n          div.innerText = container.accessibleText;\n        }\n      }\n      div.style.width = `${DIV_TOUCH_SIZE}px`;\n      div.style.height = `${DIV_TOUCH_SIZE}px`;\n      div.style.backgroundColor = this.debug ? \"rgba(255,255,255,0.5)\" : \"transparent\";\n      div.style.position = \"absolute\";\n      div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n      div.style.borderStyle = \"none\";\n      if (navigator.userAgent.toLowerCase().includes(\"chrome\")) {\n        div.setAttribute(\"aria-live\", \"off\");\n      } else {\n        div.setAttribute(\"aria-live\", \"polite\");\n      }\n      if (navigator.userAgent.match(/rv:.*Gecko\\//)) {\n        div.setAttribute(\"aria-relevant\", \"additions\");\n      } else {\n        div.setAttribute(\"aria-relevant\", \"text\");\n      }\n      div.addEventListener(\"click\", this._onClick.bind(this));\n      div.addEventListener(\"focus\", this._onFocus.bind(this));\n      div.addEventListener(\"focusout\", this._onFocusOut.bind(this));\n    }\n    div.style.pointerEvents = container.accessiblePointerEvents;\n    div.type = container.accessibleType;\n    if (container.accessibleTitle && container.accessibleTitle !== null) {\n      div.title = container.accessibleTitle;\n    } else if (!container.accessibleHint || container.accessibleHint === null) {\n      div.title = `container ${container.tabIndex}`;\n    }\n    if (container.accessibleHint && container.accessibleHint !== null) {\n      div.setAttribute(\"aria-label\", container.accessibleHint);\n    }\n    if (this.debug) {\n      this._updateDebugHTML(div);\n    }\n    container._accessibleActive = true;\n    container._accessibleDiv = div;\n    div.container = container;\n    this._children.push(container);\n    this._div.appendChild(container._accessibleDiv);\n    if (container.interactive) {\n      container._accessibleDiv.tabIndex = container.tabIndex;\n    }\n  }\n  /**\n   * Dispatch events with the EventSystem.\n   * @param e\n   * @param type\n   * @private\n   */\n  _dispatchEvent(e, type) {\n    const { container: target } = e.target;\n    const boundary = this._renderer.events.rootBoundary;\n    const event = Object.assign(new FederatedEvent(boundary), { target });\n    boundary.rootTarget = this._renderer.lastObjectRendered;\n    type.forEach((type2) => boundary.dispatchEvent(event, type2));\n  }\n  /**\n   * Maps the div button press to pixi's EventSystem (click)\n   * @private\n   * @param {MouseEvent} e - The click event.\n   */\n  _onClick(e) {\n    this._dispatchEvent(e, [\"click\", \"pointertap\", \"tap\"]);\n  }\n  /**\n   * Maps the div focus events to pixi's EventSystem (mouseover)\n   * @private\n   * @param {FocusEvent} e - The focus event.\n   */\n  _onFocus(e) {\n    if (!e.target.getAttribute(\"aria-live\")) {\n      e.target.setAttribute(\"aria-live\", \"assertive\");\n    }\n    this._dispatchEvent(e, [\"mouseover\"]);\n  }\n  /**\n   * Maps the div focus events to pixi's EventSystem (mouseout)\n   * @private\n   * @param {FocusEvent} e - The focusout event.\n   */\n  _onFocusOut(e) {\n    if (!e.target.getAttribute(\"aria-live\")) {\n      e.target.setAttribute(\"aria-live\", \"polite\");\n    }\n    this._dispatchEvent(e, [\"mouseout\"]);\n  }\n  /**\n   * Is called when a key is pressed\n   * @private\n   * @param {KeyboardEvent} e - The keydown event.\n   */\n  _onKeyDown(e) {\n    if (e.keyCode !== KEY_CODE_TAB || !this._activateOnTab) {\n      return;\n    }\n    this._activate();\n  }\n  /**\n   * Is called when the mouse moves across the renderer element\n   * @private\n   * @param {MouseEvent} e - The mouse event.\n   */\n  _onMouseMove(e) {\n    if (e.movementX === 0 && e.movementY === 0) {\n      return;\n    }\n    this._deactivate();\n  }\n  /** Destroys the accessibility system. Removes all elements and listeners. */\n  destroy() {\n    this._deactivate();\n    this._destroyTouchHook();\n    this._div = null;\n    this._pool = null;\n    this._children = null;\n    this._renderer = null;\n    if (this._activateOnTab) {\n      globalThis.removeEventListener(\"keydown\", this._onKeyDown);\n    }\n  }\n  /**\n   * Enables or disables the accessibility system.\n   * @param enabled - Whether to enable or disable accessibility.\n   */\n  setAccessibilityEnabled(enabled) {\n    if (enabled) {\n      this._activate();\n    } else {\n      this._deactivate();\n    }\n  }\n};\n/** @ignore */\n_AccessibilitySystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"accessibility\"\n};\n/** default options used by the system */\n_AccessibilitySystem.defaultOptions = {\n  /**\n   * Whether to enable accessibility features on initialization\n   * @default false\n   */\n  enabledByDefault: false,\n  /**\n   * Whether to visually show the accessibility divs for debugging\n   * @default false\n   */\n  debug: false,\n  /**\n   * Whether to activate accessibility when tab key is pressed\n   * @default true\n   */\n  activateOnTab: true,\n  /**\n   * Whether to deactivate accessibility when mouse moves\n   * @default true\n   */\n  deactivateOnMouseMove: true\n};\nlet AccessibilitySystem = _AccessibilitySystem;\n\nexport { AccessibilitySystem };\n//# sourceMappingURL=AccessibilitySystem.mjs.map\n"],"names":["KEY_CODE_TAB","DIV_TOUCH_SIZE","DIV_TOUCH_POS_X","DIV_TOUCH_POS_Y","DIV_TOUCH_ZINDEX","DIV_HOOK_SIZE","DIV_HOOK_POS_X","DIV_HOOK_POS_Y","DIV_HOOK_ZINDEX","_AccessibilitySystem","renderer","_mobileInfo","isMobile","hookDiv","canvas","observer","child","div","container","children","options","mergedOptions","now","activeIds","removeItems","x","y","viewWidth","viewHeight","hitArea","wt","sx","sy","type","target","boundary","event","FederatedEvent","type2","enabled","ExtensionType","AccessibilitySystem"],"mappings":"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","x_google_ignoreList":[0]}