{"version":3,"file":"index593.js","sources":["../../../node_modules/.pnpm/pixi.js@8.8.1/node_modules/pixi.js/lib/utils/canvas/getCanvasBoundingBox.mjs"],"sourcesContent":["import { Rectangle } from '../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nfunction checkRow(data, width, y) {\n  for (let x = 0, index = 4 * y * width; x < width; ++x, index += 4) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction checkColumn(data, width, x, top, bottom) {\n  const stride = 4 * width;\n  for (let y = top, index = top * stride + 4 * x; y <= bottom; ++y, index += stride) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction getCanvasBoundingBox(canvas, resolution = 1) {\n  const { width, height } = canvas;\n  const context = canvas.getContext(\"2d\", {\n    willReadFrequently: true\n  });\n  if (context === null) {\n    throw new TypeError(\"Failed to get canvas 2D context\");\n  }\n  const imageData = context.getImageData(0, 0, width, height);\n  const data = imageData.data;\n  let left = 0;\n  let top = 0;\n  let right = width - 1;\n  let bottom = height - 1;\n  while (top < height && checkRow(data, width, top))\n    ++top;\n  if (top === height)\n    return Rectangle.EMPTY;\n  while (checkRow(data, width, bottom))\n    --bottom;\n  while (checkColumn(data, width, left, top, bottom))\n    ++left;\n  while (checkColumn(data, width, right, top, bottom))\n    --right;\n  ++right;\n  ++bottom;\n  return new Rectangle(left / resolution, top / resolution, (right - left) / resolution, (bottom - top) / resolution);\n}\n\nexport { getCanvasBoundingBox };\n//# sourceMappingURL=getCanvasBoundingBox.mjs.map\n"],"names":["checkRow","data","width","y","x","index","checkColumn","top","bottom","stride","getCanvasBoundingBox","canvas","resolution","height","context","left","right","Rectangle"],"mappings":";AAGA,SAASA,EAASC,GAAMC,GAAOC,GAAG;AAChC,WAASC,IAAI,GAAGC,IAAQ,IAAIF,IAAID,GAAOE,IAAIF,GAAO,EAAEE,GAAGC,KAAS;AAC9D,QAAIJ,EAAKI,IAAQ,CAAC,MAAM;AACtB,aAAO;AAEX,SAAO;AACT;AACA,SAASC,EAAYL,GAAMC,GAAOE,GAAGG,GAAKC,GAAQ;AAChD,QAAMC,IAAS,IAAIP;AACnB,WAASC,IAAII,GAAKF,IAAQE,IAAME,IAAS,IAAIL,GAAGD,KAAKK,GAAQ,EAAEL,GAAGE,KAASI;AACzE,QAAIR,EAAKI,IAAQ,CAAC,MAAM;AACtB,aAAO;AAEX,SAAO;AACT;AACA,SAASK,EAAqBC,GAAQC,IAAa,GAAG;AACpD,QAAM,EAAE,OAAAV,GAAO,QAAAW,EAAQ,IAAGF,GACpBG,IAAUH,EAAO,WAAW,MAAM;AAAA,IACtC,oBAAoB;AAAA,EACxB,CAAG;AACD,MAAIG,MAAY;AACd,UAAM,IAAI,UAAU,iCAAiC;AAGvD,QAAMb,IADYa,EAAQ,aAAa,GAAG,GAAGZ,GAAOW,CAAM,EACnC;AACvB,MAAIE,IAAO,GACPR,IAAM,GACNS,IAAQd,IAAQ,GAChBM,IAASK,IAAS;AACtB,SAAON,IAAMM,KAAUb,EAASC,GAAMC,GAAOK,CAAG;AAC9C,MAAEA;AACJ,MAAIA,MAAQM;AACV,WAAOI,EAAU;AACnB,SAAOjB,EAASC,GAAMC,GAAOM,CAAM;AACjC,MAAEA;AACJ,SAAOF,EAAYL,GAAMC,GAAOa,GAAMR,GAAKC,CAAM;AAC/C,MAAEO;AACJ,SAAOT,EAAYL,GAAMC,GAAOc,GAAOT,GAAKC,CAAM;AAChD,MAAEQ;AACJ,WAAEA,GACF,EAAER,GACK,IAAIS,EAAUF,IAAOH,GAAYL,IAAMK,IAAaI,IAAQD,KAAQH,IAAaJ,IAASD,KAAOK,CAAU;AACpH;","x_google_ignoreList":[0]}