import {forwardRef,useRef,useImperativeHandle,useEffect,useState,useCallback}from'react';import {createGameShield}from'@gameshield/core';import {jsx}from'react/jsx-runtime';var x=forwardRef(function({gameType:o="random",size:t="100%",difficulty:l="medium",onSuccess:e,onFailure:a,onTimeout:r,className:d,style:c},p){let s=useRef(null),n=useRef(null),u=typeof t=="number"?`${t}px`:t;return useImperativeHandle(p,()=>({reset:()=>{n.current&&n.current.reset();}})),useEffect(()=>{if(s.current)return setTimeout(()=>{n.current=createGameShield({container:s.current,gameType:o,size:u,difficulty:l,onSuccess:e,onFailure:a,onTimeout:r});},0),()=>{n.current&&(n.current.destroy(),n.current=null);}},[o,u,l,e,a,r]),jsx("div",{className:`gameshield-container ${d||""}`,style:{width:"100%",height:"100%",aspectRatio:"1/1",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",...c},children:jsx("div",{ref:s,className:"gameshield-content aspect-square",style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#1a1a1a"}})})});function J(i={}){let o=useRef(null),t=useRef(null),[l,e]=useState(false),[a,r]=useState(false),[d,c]=useState(null),[p,s]=useState(null),{gameType:n="random",size:u="400px",difficulty:S="medium",onSuccess:h,onFailure:y,onTimeout:g}=i,b=useCallback(()=>{e(true),r(false),c(null),s(null),t.current&&t.current.reset();},[]);return useEffect(()=>{if(!o.current)return;e(true),r(false),c(null),s(null);let w=f=>{e(false),r(true),c(f),h&&h(f);},E=f=>{e(false),r(false),s(f),y&&y(f);},C=()=>{e(false),r(false),s("Verification timed out"),g&&g();};return t.current=createGameShield({container:o.current,gameType:n,size:u,difficulty:S,onSuccess:w,onFailure:E,onTimeout:C}),()=>{t.current&&(t.current.destroy(),t.current=null);}},[n,u,S,h,y,g]),{ref:o,isVerifying:l,isVerified:a,token:d,error:p,reset:b}}function Z({size:i,className:o,style:t,...l}){let e=useRef(null);useEffect(()=>{if(i!==void 0||!e.current)return;let r=new ResizeObserver(()=>{e.current&&(e.current.style.width="100%",e.current.style.height="100%");});return r.observe(e.current.parentElement||e.current),()=>{e.current&&r.disconnect();}},[i]);let a=i!==void 0?{width:`${i}px`,height:`${i}px`,maxWidth:"100%",maxHeight:"100%",...t}:{width:"100%",height:"100%",...t};return jsx("div",{ref:e,className:`gameshield-captcha-container ${o||""}`,style:{...a,aspectRatio:"1/1",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:jsx(x,{size:"100%",style:{width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%"},...l})})}export{Z as Captcha,x as GameShield,J as useGameShield};//# sourceMappingURL=index.mjs.map
//# sourceMappingURL=index.mjs.map