'use strict';var react=require('react'),core=require('@gameshield/core'),jsxRuntime=require('react/jsx-runtime');var x=react.forwardRef(function({gameType:o="random",size:t="100%",difficulty:l="medium",onSuccess:e,onFailure:a,onTimeout:r,className:d,style:c},p){let s=react.useRef(null),n=react.useRef(null),u=typeof t=="number"?`${t}px`:t;return react.useImperativeHandle(p,()=>({reset:()=>{n.current&&n.current.reset();}})),react.useEffect(()=>{if(s.current)return setTimeout(()=>{n.current=core.createGameShield({container:s.current,gameType:o,size:u,difficulty:l,onSuccess:e,onFailure:a,onTimeout:r});},0),()=>{n.current&&(n.current.destroy(),n.current=null);}},[o,u,l,e,a,r]),jsxRuntime.jsx("div",{className:`gameshield-container ${d||""}`,style:{width:"100%",height:"100%",aspectRatio:"1/1",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",...c},children:jsxRuntime.jsx("div",{ref:s,className:"gameshield-content aspect-square",style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"#1a1a1a"}})})});function J(i={}){let o=react.useRef(null),t=react.useRef(null),[l,e]=react.useState(false),[a,r]=react.useState(false),[d,c]=react.useState(null),[p,s]=react.useState(null),{gameType:n="random",size:u="400px",difficulty:S="medium",onSuccess:h,onFailure:y,onTimeout:g}=i,b=react.useCallback(()=>{e(true),r(false),c(null),s(null),t.current&&t.current.reset();},[]);return react.useEffect(()=>{if(!o.current)return;e(true),r(false),c(null),s(null);let w=f=>{e(false),r(true),c(f),h&&h(f);},E=f=>{e(false),r(false),s(f),y&&y(f);},C=()=>{e(false),r(false),s("Verification timed out"),g&&g();};return t.current=core.createGameShield({container:o.current,gameType:n,size:u,difficulty:S,onSuccess:w,onFailure:E,onTimeout:C}),()=>{t.current&&(t.current.destroy(),t.current=null);}},[n,u,S,h,y,g]),{ref:o,isVerifying:l,isVerified:a,token:d,error:p,reset:b}}function Z({size:i,className:o,style:t,...l}){let e=react.useRef(null);react.useEffect(()=>{if(i!==void 0||!e.current)return;let r=new ResizeObserver(()=>{e.current&&(e.current.style.width="100%",e.current.style.height="100%");});return r.observe(e.current.parentElement||e.current),()=>{e.current&&r.disconnect();}},[i]);let a=i!==void 0?{width:`${i}px`,height:`${i}px`,maxWidth:"100%",maxHeight:"100%",...t}:{width:"100%",height:"100%",...t};return jsxRuntime.jsx("div",{ref:e,className:`gameshield-captcha-container ${o||""}`,style:{...a,aspectRatio:"1/1",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center"},children:jsxRuntime.jsx(x,{size:"100%",style:{width:"100%",height:"100%",maxWidth:"100%",maxHeight:"100%"},...l})})}exports.Captcha=Z;exports.GameShield=x;exports.useGameShield=J;//# sourceMappingURL=index.js.map
//# sourceMappingURL=index.js.map